---
title: "Oracle System"
description: "LLM-assisted oracle architecture for prediction market settlement"
---

## Oracle Architecture

The PNP Exchange oracle system is a decentralized settlement mechanism that uses large language models (LLMs) to evaluate structured evidence and determine market outcomes. The system is designed to provide transparent, verifiable, and time-bounded settlement for prediction markets.

### Core Components

**LLM Providers**: Integration with Perplexity and Grok 4 for real-time, wide-coverage information retrieval and analysis.

**Evidence Evaluation Engine**: Structured prompting system that requires explicit source checking, data extraction, and threshold computation.

**Time-Bounded Data Collection**: Restricts oracle queries to information available before market deadlines to prevent hindsight bias.

**On-Chain Settlement Module**: Solana program that commits final outcomes to the blockchain with verifiable transaction records.

## Settlement Workflow

### Phase 1: Criteria Generation

After market creation, the oracle system performs initial assessment and criteria generation:

**Resolvability Assessment**
- Evaluates whether the market question is objectively answerable by the deadline
- Identifies authoritative sources for evidence collection
- Defines specific metrics and thresholds for outcome determination

**Criteria Definition**
- Establishes exact measurement parameters (scores, counts, prices, timestamps)
- Creates objective rubric for outcome computation
- Incorporates token-specific context for cryptocurrency markets

**Market Classification**
- Markets flagged as non-resolvable are filtered out and routed to refund mechanisms
- Resolvable markets proceed to active trading phase

### Phase 2: Settlement Execution

At or after market end time, the oracle executes the settlement process:

**Evidence Collection**
- Queries pre-identified authoritative sources
- Extracts specific data points required for outcome determination
- Applies time-bounded filters to prevent information leakage

**LLM Evaluation**
- Uses structured prompts to analyze collected evidence
- Performs explicit calculations and threshold comparisons
- Generates deterministic YES/NO outcomes with transparent reasoning

**Consensus Mechanism**
- Optional multi-provider consensus for increased confidence
- Conflict resolution using authoritative source precedence
- Safe fallback mechanisms for ambiguous cases

**On-Chain Finalization**
- Commits decisive outcomes to the blockchain
- Enables refund mechanisms for ambiguous or non-resolvable markets
- Provides transparent audit trail for all settlement decisions

## Technical Specifications

### LLM Integration

**Provider Selection**
- **Perplexity**: Real-time information retrieval with source attribution
- **Grok 4**: Advanced reasoning capabilities for complex market analysis
- **Multi-Provider Support**: Optional consensus mechanisms for critical decisions

**Prompt Engineering**
- Evidence-first prompting requiring explicit source verification
- Structured data extraction with specific metric requirements
- Transparent reasoning chains with verifiable calculations

### Data Management

**Time-Bounded Queries**
- Strict deadline enforcement for all information collection
- Prevents hindsight bias through temporal filtering
- Maintains market integrity and fairness

**Source Precedence**
- Official databases and governing bodies receive highest priority
- Clear conflict resolution policies for contradictory information
- Transparent source attribution for all settlement decisions

### Security Features

**Access Control**
- Sensitive operations require administrative authorization
- Emergency refund mechanisms for edge cases
- Production environment restrictions on test endpoints

**Audit Trail**
- Complete logging of all oracle decisions and reasoning
- Transparent source attribution and calculation methods
- On-chain verification of all settlement outcomes

## Market Type Support

### Current Support
- **Token Price Markets**: Cryptocurrency price predictions with real-time data integration
- **Social Media Events**: Platform-specific metrics and engagement data
- **Sports Outcomes**: Official league and tournament results
- **Political Events**: Government and electoral data sources

### Planned Expansion
- **On-Chain Protocol Events**: Smart contract and blockchain data integration
- **Custom Rubric Markets**: User-defined resolution criteria
- **Multi-Asset Markets**: Complex outcomes involving multiple data sources

## Integration Points

### API Layer
- RESTful endpoints for market data and settlement status
- Webhook support for real-time settlement notifications
- Comprehensive market information and criteria access

### Solana Integration
- Native program integration for on-chain settlement
- SPL token support for outcome token management
- Program-derived addresses for secure account management

### Developer Tools
- SDK integration for oracle data access
- Settlement criteria templates for common market types
- Testing frameworks for oracle behavior validation

## Roadmap

### Short-term Improvements
- Enhanced criteria templates for additional market types
- Improved source precedence policies and conflict resolution
- Expanded time-bounded data collection capabilities

### Long-term Development
- Decentralized operator network for consensus-based settlement
- Additional MCP connectors for domain-specific evidence
- Advanced multi-model consensus mechanisms
- Integration with additional LLM providers and data sources


