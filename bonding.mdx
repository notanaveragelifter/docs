---
title: "Bonding Curve AMM"
description: "Mathematical specifications and implementation of the Pythagorean bonding curve"
---

## Bonding Curve Architecture

PNP Exchange implements a Pythagorean bonding curve as the core automated market maker (AMM) mechanism for prediction markets. This design provides continuous liquidity and price discovery without requiring external market makers or order books.

### Core Principles

**Continuous Liquidity**: Every market has built-in liquidity from the moment of creation, eliminating the need for external liquidity providers.

**Automatic Price Discovery**: Token prices adjust automatically based on supply and demand through mathematical formulas.

**No Order Book Dependency**: Trading occurs directly against the bonding curve, removing counterparty risk and order book complexity.

## Mathematical Specification

### Pythagorean Formula

The bonding curve uses a modified Pythagorean formula to maintain price relationships:

```
r² = s_yes² + s_no² + s_draw²
```

**Where:**
- `r` = Total reserve (capital) invested in the prediction market
- `s_yes` = Supply of YES outcome tokens
- `s_no` = Supply of NO outcome tokens  
- `s_draw` = Supply of DRAW outcome tokens (when applicable)
- `c` = Coefficient that starts at 1 and grows to account for accrued fees

### Price Constraint

The implementation maintains the constraint:
```
Price(yes)² + Price(no)² = 1
```

This ensures that the sum of squared prices always equals 1, maintaining mathematical consistency in the pricing model.

### Price Calculation

Token prices are calculated based on the current supply and reserve:

**YES Token Price:**
```
P_yes = s_yes / r
```

**NO Token Price:**
```
P_no = s_no / r
```

## Implementation Details

### Market Creation

When a market is created with initial liquidity `X`:
1. Creator provides `X` USDC as initial reserve
2. Creator receives equal amounts of YES and NO tokens
3. Initial token supplies are calculated to maintain price equilibrium
4. Market becomes immediately tradeable

### Trading Mechanics

**Buying Tokens:**
- User provides USDC collateral
- Tokens are minted based on current curve position
- Reserve increases, affecting future token prices
- Fee is applied and distributed according to protocol rules

**Selling Tokens:**
- User burns outcome tokens
- USDC is returned based on current curve position
- Reserve decreases, affecting future token prices
- Fee is applied and distributed according to protocol rules

### Fee Integration

The bonding curve incorporates a fee coefficient `c` that:
- Starts at 1.0 for new markets
- Increases over time as fees accrue
- Ensures sustainable economics for long-term liquidity provision
- Maintains price discovery while generating protocol revenue

## Advantages

### For Market Creators
- **Instant Liquidity**: Markets are tradeable immediately upon creation
- **No Market Maker Requirements**: No need to find external liquidity providers
- **Predictable Economics**: Clear fee structure and revenue sharing

### For Traders
- **Always Tradeable**: No risk of being unable to exit positions
- **Transparent Pricing**: Prices calculated by verifiable mathematical formulas
- **No Slippage from Order Book**: Direct trading against the curve

### For the Protocol
- **Scalable**: Works for any market size or niche
- **Composable**: Integrates with existing DeFi infrastructure
- **Sustainable**: Fees accrue to the protocol and participants

## Technical Implementation

### On-Chain Components
- **Solana Program**: Handles all bonding curve calculations
- **SPL Tokens**: YES/NO tokens as standard SPL tokens
- **USDC Collateral**: Standard collateral token for all markets
- **Program-Derived Addresses**: Secure account management

### Integration Points
- **SDK Support**: TypeScript SDK for easy integration
- **API Endpoints**: RESTful API for market data access
- **Event Logging**: Comprehensive transaction logging for transparency

## References

For additional technical background on bonding curve prediction markets:
- [Introducing Prophet — Prediction Markets Based On Bonding Curves](https://blog.obyte.org/introducing-prophet-prediction-markets-based-on-bonding-curves-3716651db344)